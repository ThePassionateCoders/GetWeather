<SearchToolbar@MDBoxLayout>

	Widget:
		size_hint_x: .15


	MDTextField:
		id: search_textbar
		hint_text: "Enter your city"
		pos_hint: {"center_x": .5, "center_y": .5}
		size_hint_x: .7
		on_text_validate: app.searched(search_textbar.text)

	MDIconButton:
		id: search_button
		icon: "magnify"
		theme_text_color: "Custom"
		text_color: search_textbar.line_color_focus if search_textbar.focus else search_textbar.line_color_normal
		ripple_scale: 0 if len(search_textbar.text)==0 else 2
		pos_hint: {"center_x": .5, "center_y": .5}
		on_release: 
			app.searched(search_textbar.text)

	Widget:
		size_hint_x: .15

<ConfirmCity>
	check: check
	on_release: app.select_city(check, self)

	CheckboxLeftWidget:
		id: check
		group: "city"
		on_release: app.select_city(self, root)

<MyMDLabel@MDLabel>
	halign: "center"
	padding: (10, 10)

MDScreen:
	id: app_screen

	MDToolbar:
		id: menubar 
		pos_hint: {"top": 1}
		title: "GET WEATHER"
		left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]] 

	SearchToolbar:
		id: search_toolbar
		y: app_screen.height - menubar.height - search_toolbar.height
		size_hint: (1, None)
		height: dp(75)

	MDNavigationLayout:

		ScreenManager:
			id: app_screen_manager

			MDScreen:
				id: main_screen
				name: "main screen"
				pos_hint: {"bottom": 0}
				size_hint_y: None
				height: root.height - search_toolbar.height - menubar.height

				ScrollView:

					size: main_screen.size
					do_scroll_x: False
					do_scroll_y: True

					MDGridLayout:
						cols: 1
						size_hint: (1, None)
						height: self.minimum_height
						spacing: 20
						padding: 20

						MDLabel:
							id: city_info
							size_hint: (1, None)
							adaptive_height: True
							markup: True
							text: f"{app.selected_city.text}, {app.selected_city.secondary_text}"
							font_size: dp(30)
							padding: (10, 0)

						MDCard:
							size_hint: (1, None)
							height: dp(120)
							elevation: 10
							radius: 20

							MDGridLayout:
								cols: 1

								MyMDLabel:
									id: current_weather_text
									text: "Heavy rain"
									md_bg_color: app.theme_cls.primary_color
									halign: "center"
									pos_hint: {"top": 1}
									size_hint: (1, .3)

								MDBoxLayout:
									size_hint: (1, .7)
									pos_hint:  {"bottom": 0}

									AsyncImage:
										id: current_weather_icon
										source: "https://developer.accuweather.com/sites/default/files/01-s.png"
										pos_hint: {"bottom": 0}

									MyMDLabel:
										id: current_temp
										text: "37 \u00B0C"
										font_size: dp(30) if app_screen.width > dp(250) else dp(25)
										halign: "center"


						MDCard:
							size_hint: (1, None)
							height: dp(500)
							elevation: 10
							radius: 20

							MDGridLayout:
								cols: 2 if app_screen.width > dp(270) else 1
								positon_hint:{"top": 1}
								size: root.size

								MyMDLabel: 
									md_bg_color: app.theme_cls.primary_color
									text: "Current Conditions"
									halign: "left"

								MyMDLabel:
									id: current_datetime
									md_bg_color: app.theme_cls.primary_color
									text: "DateTime"
									halign: "right"

								MyMDLabel:
									text: "Real Feel Temperature"

								MyMDLabel:
									id: current_real_feel_temp
									text: "37 \u00B0C"
																		
								MyMDLabel:
									text: "Humidity"
									md_bg_color: (209/255, 220/255, 222/255, 1)
									
								MyMDLabel:
									id: current_relative_humidity
									md_bg_color: (209/255, 220/255, 222/255, 1)
									text: "34 %"
									
								MyMDLabel:
									text: "Indoor Humidity"
									
								MyMDLabel:
									id: current_indoor_relative_humidity
									text: "30 %"
									
								MyMDLabel:
									md_bg_color: (209/255, 220/255, 222/255, 1)
									text: "Wind"
									
								MyMDLabel:
									id: current_wind
									md_bg_color: (209/255, 220/255, 222/255, 1)
									text: "NNW 34 km/hr"
									
								MyMDLabel:
									text: "Wind Gust"
									
								MyMDLabel:
									id: current_wind_gust
									text: "45 km/hr"
									
								MyMDLabel:
									md_bg_color: (209/255, 220/255, 222/255, 1)
									text: "UV Index"
									
								MyMDLabel:
									id: current_uv_index
									md_bg_color: (209/255, 220/255, 222/255, 1)
									text: "0 (Low)"
									
								MyMDLabel:
									text: "Visibility"
									
								MyMDLabel:
									id: current_visibility
									text: "45 mi"
									
								MyMDLabel:
									md_bg_color: (209/255, 220/255, 222/255, 1)
									text: "Pressure"
									
								MyMDLabel:
									id: current_pressure
									md_bg_color: (209/255, 220/255, 222/255, 1)
									text: "1001 lb"
									
								MyMDLabel:
									text: "Precipitation"
									
								MyMDLabel:
									id: current_precipitation
									text: "   0 mm"

						MDCard:
							size_hint: (1, None)
							md_bg_color: (0,0,1,1)
							height: main_screen.height//3

						MDCard:
							size_hint: (1, None)
							md_bg_color: (1,0,0,1)
							height: main_screen.height//3

		MDNavigationDrawer:
			id: nav_drawer

		